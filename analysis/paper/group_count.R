#!/usr/bin/env Rscript
#
# Generates the table containing the number of groups generated by each tool.
# Input: The CSV file containing the combined decomposition results for all the bugs (generated by `combine_decompositions.py`).
# Output: The path where save the output table as a .tex file.

library(tidyverse)
library(xtable)

args = commandArgs(trailingOnly=TRUE)

if (length(args)!=2) {
  stop("Please provide an input file and output file.", call.=FALSE)
}
inputFile = args[1]
outputFile = args[2]

data <- read.csv(inputFile)
data$BugId <- as_factor(data$BugId)

groupCount <- data %>% group_by(Project, BugId, Treatment) %>% summarise(GroupCount = n_distinct(Group))
summary <- groupCount %>% group_by(Treatment) %>% summarise("Min."=min(GroupCount), "Max."=max(GroupCount), "Median."=median(GroupCount), "Std. Dev."=sd(GroupCount))
summary.table <- xtable(summary)

print(summary.table, only.contents = TRUE, booktabs = TRUE, timestamp	= NULL, comment = TRUE, include.rownames = FALSE, file=outputFile)
