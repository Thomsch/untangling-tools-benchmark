#!/usr/bin/env Rscript
#
# Generates summary table for the manual evaluation.
# Arguments:
# - 1. The CSV file containing manual observations (saved in `analysis/manual/observed-tangled-changes.csv`).
# - 2. The CSV file containing the number of bug fixing lines and non-bug fixing lines on the original VC diff (generated by `src/python/main/count_lines.py`).
# - 3. The CSV file containing the combined decomposition results for all the bugs (generated by `src/python/main/analysis/concatenate_untangled_lines.py`).
# - 4. The path where save the output table as a .tex file.
#
# Output:
# The output is a .tex file containing the rows for the manual evaluation overview table.

library(tidyverse)
library(xtable)

args = commandArgs(trailingOnly=TRUE)

if (length(args)!=4) {
  stop("Please provide 4 arguments: the the manual observations csv, the number of bug fixing lines and non-bug fixing lines csv, combined decompositions csv and output path.", call.=FALSE)
}

manualObservationPath = args[1]
changedLinesCount = args[2]
combinedDecomposition = args[3]
outputFile = args[4]

# TODO: Read the manually observed tangled changes
# TODO: Use line-counts.sh to get the number of bug fixing lines and non-bug fixing lines on the original VC diff.
# TODO: Use code from group_count to have a summary per bug to get the number of groups generated by flexeme and smartcommit.