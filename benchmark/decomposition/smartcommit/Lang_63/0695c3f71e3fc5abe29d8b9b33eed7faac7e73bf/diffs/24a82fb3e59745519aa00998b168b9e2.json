{
  "repoID": "1612579470",
  "repoName": "Lang_63",
  "fileID": "24a82fb3e59745519aa00998b168b9e2",
  "index": 0,
  "status": "MODIFIED",
  "fileType": "JAVA",
  "baseRelativePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
  "currentRelativePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
  "baseContent": "",
  "currentContent": "",
  "description": "modified",
  "diffHunksMap": {
    "e6fb4978f33f48679891cda8273ad5f5": {
      "repoID": "1612579470",
      "repoName": "Lang_63",
      "fileID": "24a82fb3e59745519aa00998b168b9e2",
      "diffHunkID": "e6fb4978f33f48679891cda8273ad5f5",
      "fileIndex": 0,
      "index": 3,
      "baseHunk": {
        "relativeFilePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
        "startLine": 430,
        "endLine": 452,
        "version": "BASE",
        "contentType": "CODE",
        "codeSnippet": [
          "    /**",
          "     * Reduces by difference, then if it overshot, calculates the overshot amount and ",
          "     * fixes and returns the amount to change by.",
          "     *",
          "     * @param start Start of period being formatted",
          "     * @param end End of period being formatted",
          "     * @param field Field to reduce, as per constants in {@link java.util.Calendar}",
          "     * @param difference amount to reduce by",
          "     * @return int reduced value",
          "     */",
          "    static int reduceAndCorrect(Calendar start, Calendar end, int field, int difference) {",
          "        end.add( field, -1 * difference );",
          "        int endValue = end.get(field);",
          "        int startValue = start.get(field);",
          "        if (endValue < startValue) {",
          "            int newdiff = startValue - endValue;",
          "            end.add( field, newdiff );",
          "            return newdiff;",
          "        } else {",
          "            return 0;",
          "        }",
          "    }",
          ""
        ]
      },
      "currentHunk": {
        "relativeFilePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
        "startLine": 427,
        "endLine": 426,
        "version": "CURRENT",
        "contentType": "EMPTY",
        "codeSnippet": []
      },
      "fileType": "JAVA",
      "changeType": "DELETED",
      "description": "Delete MethodDeclaration \"reduceAndCorrect\".\n",
      "rawDiffs": [
        "@@ -430,23 +427,0 @@ public class DurationFormatUtils {",
        "-    /**",
        "-     * Reduces by difference, then if it overshot, calculates the overshot amount and ",
        "-     * fixes and returns the amount to change by.",
        "-     *",
        "-     * @param start Start of period being formatted",
        "-     * @param end End of period being formatted",
        "-     * @param field Field to reduce, as per constants in {@link java.util.Calendar}",
        "-     * @param difference amount to reduce by",
        "-     * @return int reduced value",
        "-     */",
        "-    static int reduceAndCorrect(Calendar start, Calendar end, int field, int difference) {",
        "-        end.add( field, -1 * difference );",
        "-        int endValue = end.get(field);",
        "-        int startValue = start.get(field);",
        "-        if (endValue < startValue) {",
        "-            int newdiff = startValue - endValue;",
        "-            end.add( field, newdiff );",
        "-            return newdiff;",
        "-        } else {",
        "-            return 0;",
        "-        }",
        "-    }",
        "-"
      ]
    },
    "954fd2f2940642a6b8da6923e23a933f": {
      "repoID": "1612579470",
      "repoName": "Lang_63",
      "fileID": "24a82fb3e59745519aa00998b168b9e2",
      "diffHunkID": "954fd2f2940642a6b8da6923e23a933f",
      "fileIndex": 0,
      "index": 1,
      "baseHunk": {
        "relativeFilePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
        "startLine": 307,
        "endLine": 306,
        "version": "BASE",
        "contentType": "EMPTY",
        "codeSnippet": []
      },
      "currentHunk": {
        "relativeFilePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
        "startLine": 314,
        "endLine": 314,
        "version": "CURRENT",
        "contentType": "CODE",
        "codeSnippet": [
          "            end.add(Calendar.MONTH, 1);"
        ]
      },
      "fileType": "JAVA",
      "changeType": "ADDED",
      "description": "Add MethodInvocation.\n",
      "rawDiffs": [
        "@@ -307,0 +314 @@ public class DurationFormatUtils {",
        "+            end.add(Calendar.MONTH, 1);"
      ]
    },
    "3308dab1d6c64985aa617bd86ff07afe": {
      "repoID": "1612579470",
      "repoName": "Lang_63",
      "fileID": "24a82fb3e59745519aa00998b168b9e2",
      "diffHunkID": "3308dab1d6c64985aa617bd86ff07afe",
      "fileIndex": 0,
      "index": 0,
      "baseHunk": {
        "relativeFilePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
        "startLine": 306,
        "endLine": 306,
        "version": "BASE",
        "contentType": "CODE",
        "codeSnippet": [
          "            days += 31; // such overshooting is taken care of later on"
        ]
      },
      "currentHunk": {
        "relativeFilePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
        "startLine": 306,
        "endLine": 312,
        "version": "CURRENT",
        "contentType": "CODE",
        "codeSnippet": [
          "            end.add(Calendar.MONTH, -1);",
          "            days += end.getActualMaximum(Calendar.DAY_OF_MONTH);",
          "//days += 31; // TODO: Need tests to show this is bad and the new code is good.",
          "// HEN: It's a tricky subject. Jan 15th to March 10th. If I count days-first it is ",
          "// 1 month and 26 days, but if I count month-first then it is 1 month and 23 days.",
          "// Also it's contextual - if asked for no M in the format then I should probably ",
          "// be doing no calculating here."
        ]
      },
      "fileType": "JAVA",
      "changeType": "MODIFIED",
      "description": "Update ExpressionStatement \"days+=31;\" To: \"end.add(Calendar.MONTH,-1);\".\n",
      "rawDiffs": [
        "@@ -306 +306,7 @@ public class DurationFormatUtils {",
        "-            days += 31; // such overshooting is taken care of later on",
        "+            end.add(Calendar.MONTH, -1);",
        "+            days += end.getActualMaximum(Calendar.DAY_OF_MONTH);",
        "+//days += 31; // TODO: Need tests to show this is bad and the new code is good.",
        "+// HEN: It's a tricky subject. Jan 15th to March 10th. If I count days-first it is ",
        "+// 1 month and 26 days, but if I count month-first then it is 1 month and 23 days.",
        "+// Also it's contextual - if asked for no M in the format then I should probably ",
        "+// be doing no calculating here."
      ]
    },
    "21c0ec596ea140d6accc78d69e96c439": {
      "repoID": "1612579470",
      "repoName": "Lang_63",
      "fileID": "24a82fb3e59745519aa00998b168b9e2",
      "diffHunkID": "21c0ec596ea140d6accc78d69e96c439",
      "fileIndex": 0,
      "index": 2,
      "baseHunk": {
        "relativeFilePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
        "startLine": 314,
        "endLine": 322,
        "version": "BASE",
        "contentType": "CODE",
        "codeSnippet": [
          "        // take estimates off of end to see if we can equal start, when it overshoots recalculate",
          "        milliseconds -= reduceAndCorrect(start, end, Calendar.MILLISECOND, milliseconds);",
          "        seconds -= reduceAndCorrect(start, end, Calendar.SECOND, seconds);",
          "        minutes -= reduceAndCorrect(start, end, Calendar.MINUTE, minutes);",
          "        hours -= reduceAndCorrect(start, end, Calendar.HOUR_OF_DAY, hours);",
          "        days -= reduceAndCorrect(start, end, Calendar.DAY_OF_MONTH, days);",
          "        months -= reduceAndCorrect(start, end, Calendar.MONTH, months);",
          "        years -= reduceAndCorrect(start, end, Calendar.YEAR, years);",
          ""
        ]
      },
      "currentHunk": {
        "relativeFilePath": "src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
        "startLine": 320,
        "endLine": 319,
        "version": "CURRENT",
        "contentType": "EMPTY",
        "codeSnippet": []
      },
      "fileType": "JAVA",
      "changeType": "DELETED",
      "description": "Delete ExpressionStatement \"milliseconds-=reduceAndCorrect(start,end,Calendar.MILLISECOND,milliseconds);\".\nDelete ExpressionStatement \"seconds-=reduceAndCorrect(start,end,Calendar.SECOND,seconds);\".\nDelete ExpressionStatement \"minutes-=reduceAndCorrect(start,end,Calendar.MINUTE,minutes);\".\nDelete ExpressionStatement \"hours-=reduceAndCorrect(start,end,Calendar.HOUR_OF_DAY,hours);\".\nDelete ExpressionStatement \"days-=reduceAndCorrect(start,end,Calendar.DAY_OF_MONTH,days);\".\nDelete ExpressionStatement \"months-=reduceAndCorrect(start,end,Calendar.MONTH,months);\".\nDelete ExpressionStatement \"years-=reduceAndCorrect(start,end,Calendar.YEAR,years);\".\n",
      "rawDiffs": [
        "@@ -314,9 +320,0 @@ public class DurationFormatUtils {",
        "-        // take estimates off of end to see if we can equal start, when it overshoots recalculate",
        "-        milliseconds -= reduceAndCorrect(start, end, Calendar.MILLISECOND, milliseconds);",
        "-        seconds -= reduceAndCorrect(start, end, Calendar.SECOND, seconds);",
        "-        minutes -= reduceAndCorrect(start, end, Calendar.MINUTE, minutes);",
        "-        hours -= reduceAndCorrect(start, end, Calendar.HOUR_OF_DAY, hours);",
        "-        days -= reduceAndCorrect(start, end, Calendar.DAY_OF_MONTH, days);",
        "-        months -= reduceAndCorrect(start, end, Calendar.MONTH, months);",
        "-        years -= reduceAndCorrect(start, end, Calendar.YEAR, years);",
        "-"
      ]
    }
  },
  "rawHeaders": [
    "diff --git a/src/java/org/apache/commons/lang/time/DurationFormatUtils.java b/src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
    "index f777d489..3a9d9f68 100644",
    "--- a/src/java/org/apache/commons/lang/time/DurationFormatUtils.java",
    "+++ b/src/java/org/apache/commons/lang/time/DurationFormatUtils.java"
  ]
}